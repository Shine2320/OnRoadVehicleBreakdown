{% include 'adminheader.html' %}

  <section class="main-home" id="home">
      <div style=" background-image: url(/static/images/br7.jpg);
  background-size: cover;
  z-index: -1;
  position: absolute;
  top: 0;
  
  right: 0;
  bottom: 0;
  left: 0;" ></div> <!-- Background image -->
      <div class="home__header-content" style="top:27%">
        <div id="main-home-carousel" class="owl-carousel">
          <div>
<script type="text/javascript" src="http://maps.googleapis.com/maps/api/js?key=AIzaSyD3MPnSnyWwNmpnVEFkaddVvy_GWtxSejs&sensor=false"></script>
    <script type="text/javascript">
        // window.onload = function () {
          function myFunction(){
            var mapOptions = {
                center: new google.maps.LatLng(9.9763482, 76.286272),
                zoom: 14,
                mapTypeId: google.maps.MapTypeId.ROADMAP
            };
            var infoWindow = new google.maps.InfoWindow();
            var latlngbounds = new google.maps.LatLngBounds();
            var map = new google.maps.Map(document.getElementById("dvMap"), mapOptions);
            google.maps.event.addListener(map, 'click', function (e) {
                alert("Latitude: " + e.latLng.lat() + "\r\nLongitude: " + e.latLng.lng());
              document.getElementById('lat').value = e.latLng.lat();
                document.getElementById('lon').value = e.latLng.lng();
           

            });
        }
    </script>
<style type="text/css">
</style>



<center>
	<form method="post">


{% if data['updater'] %}

		<table>
			<tr>
				<td>
		<h1 style="margin-top: 7em" >UPDATE SERVICE CENTER DETAILS</h1>



		<table class="table" style="width:  700px">

		<tr>
			<th>CENTER NAME</th>
			<td><input type="text" name="center" required class="form-control" value="{{data['updater'][0]['centername']}}"	></td>
		</tr>	
		<tr>
			<th>LATITUDE</th>
			<td><input type="text" name="lat" required class="form-control" id="lat" value="{{data['updater'][0]['latitude']}}"><a onclick="myFunction();" class="btn btn-danger"><b>View Map</b></a></td>
			
		</tr>
		
		<tr>
			<th>LOGITUDE</th>
			<td><input type="taext" name="lon" required class="form-control" id="lon" value="{{data['updater'][0]['longitude']}}"></td>
		</tr>
		
		<tr>
			<th>PLACE</th>
			<td><input type="text" name="place" required class="form-control" value="{{data['updater'][0]['place']}}"></td>
		</tr>
		<tr>
			<th>PHONE</th>
			<td><input type="text" name="phone" pattern="[6-9]{1}[0-9]{9}" 
       title="Phone number with 6-9 and remaing 9 digit with 0-9" required class="form-control" value="{{data['updater'][0]['phone']}}"></td>
		</tr>
		<tr>
			<th>EMAIL</th>
			<td>
			<input type="email" name="email" pattern="[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,4}$" title="Enter Valid Email"  required class="form-control" value="{{data['updater'][0]['email']}}"></td>
		</tr>

		<tr>
			<td colspan="2" align="center"><input type="submit" name="update" value="UPDATE" class="btn btn-primary"></td>
		</tr>
	</table>
</td>



	<td>
	<div id="dvMap" style="width: 500px; height: 400px;margin-top: 10em"></div>

	</td>

			</tr>
		</table>
	{% else %}				
	
	<table>
		<tr>
			<td>	
	<h1 style="margin-top: 15em">SERVICE CENTER</h1>
	<table class="table" style="width:  700px">
		<tr>
			<th>CENTER NAME</th>
			<td><input type="text" name="center" required class="form-control"></td>
		</tr>	
		
		<tr>
			<th>LATITUDE</th>
			<td><input type="text" name="lat" required class="form-control" id="lat"><a onclick="myFunction();" class="btn btn-danger"> <b>View Map</b></a></td>
			
		</tr>
		
		<tr>
			<th>LOGITUDE</th>
			<td><input type="taext" name="lon" required class="form-control" id="lon"></td>
		</tr>
		<tr>
			<th>PLACE</th>
			<td><input type="text" name="place" required class="form-control"></td>
		</tr>
		<tr>
			<th>PHONE</th>
			<td><input type="text" name="phone" pattern="[6-9]{1}[0-9]{9}" 
       title="Phone number with 6-9 and remaing 9 digit with 0-9" required class="form-control"></td>
		</tr>
		<tr>
			<th>EMAIL</th>
			<td>
			<input type="email" name="email" pattern="[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,4}$" title="Enter Valid Email"  required class="form-control"></td>
		</tr>
		<tr>
			<td colspan="2" align="center"><input type="submit" name="submit" value="ADD" class="btn btn-primary"></td>
		</tr>
	</table>
</td>
<td>
	<div id="dvMap" style="width: 500px; height: 400px;margin-top: 25em"></div>
	</td>

			</tr>
		</table>




{% if data['center'] %}
		<h1 > SERVICE CENTERS ADDED IN OUR SYSTEM</h1>
			<div style="overflow: scroll;  height: 270px">
		<table class="table" width="600px">
			<tr>
				<th>CENTER NAME</th>
				<th>PLACE</th>
				<th>LATITUDE</th>
				<th>LONGITUDE</th>
				
				<th>PHONE</th>
				<th>EMAIL</th>
				

			</tr>
			{% for row in data['center'] %}
			<tr>
				<td>{{ row['centername'] }}</td>
				<td>{{row['place']}}</td>
				<td>{{row ['latitude']}}</td>
				<td>{{ row['longitude']}}</td>
				
				<td>{{row['phone']}}</td>
				<td>{{row['email']}}</td>
				<td><a href="?action=update&id={{ row['servicecenter_id'] }}" class="btn btn-warning">UPDATE</a></td>
				<td><a href="?action=delete&id={{ row['servicecenter_id'] }}" class="btn btn-danger" >DELETE</a></td>
			</tr>
			{% endfor%}
		</table>
	</div>
		
		{% endif %}
		{% endif %}



</form>
</center>
        

          </div><!--slide item like paragraph-->

        </div>
      </div>
    </section>

{% include 'footer.html' %}